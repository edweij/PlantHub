@using System.Reflection
@inject IHttpContextAccessor HttpContextAccessor

<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    @{
        var ingressPath = HttpContextAccessor.HttpContext?.Request?.Headers["X-Ingress-Path"].FirstOrDefault();
        var fallback = "./";
        var baseHref = string.IsNullOrEmpty(ingressPath) ? fallback : $"{ingressPath}/";
    }
    <base href="@baseHref" />

    <!-- OBS: vi behåller länken till app.css, som nu är kompilerad från app.scss -->
    <link rel="stylesheet" href="app.css" />
    <link rel="stylesheet" href="PlantHub.Web.styles.css" />
    <ImportMap />
    <HeadOutlet />
</head>

<body>
    <div class="app">
        <main class="app-main">
            <Routes />           
        </main>

        <footer class="app-footer">
            <div>PlantHub</div>
            <div class="right">v. @VersionText</div>
        </footer>
    </div>

    <script src="_framework/blazor.web.js"></script>
</body>
</html>

@code {
    private static string VersionText =>
        Assembly.GetExecutingAssembly()
            .GetCustomAttribute<AssemblyInformationalVersionAttribute>()
            ?.InformationalVersion
        ?? Assembly.GetExecutingAssembly().GetName().Version?.ToString()
        ?? "0.0.0";
}


